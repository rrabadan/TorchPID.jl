<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Photon Spectrum · TorchPID.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://rrabadan.github.io/TorchPID.jl/api/photonspectrum/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TorchPID.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../torch/">TORCH Detector</a></li><li><a class="tocitem" href="../../guide/">Guide</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../api/">Overview</a></li><li><a class="tocitem" href="../physics_constants/">Physics Constants</a></li><li><a class="tocitem" href="../hit_models/">Hit Models</a></li><li><a class="tocitem" href="../photon/">Photon</a></li><li><a class="tocitem" href="../photonmapper/">Photon Mapper</a></li><li class="is-active"><a class="tocitem" href>Photon Spectrum</a></li><li><a class="tocitem" href="../pattern_matcher/">Pattern Matcher</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Photon Spectrum</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Photon Spectrum</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rrabadan/TorchPID.jl/blob/main/docs/src/api/photonspectrum.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="PhotonSpectrum-API"><a class="docs-heading-anchor" href="#PhotonSpectrum-API">PhotonSpectrum API</a><a id="PhotonSpectrum-API-1"></a><a class="docs-heading-anchor-permalink" href="#PhotonSpectrum-API" title="Permalink"></a></h1><p>Tools to model the Cherenkov radiation photon spectra within the TORCH detector</p><h3 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="TorchPID.PhotonSpectrum" href="#TorchPID.PhotonSpectrum"><code>TorchPID.PhotonSpectrum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PhotonSpectrum(nbins, emin, emax, dE, energy, efficiency, nphase, ngroup, vgroup, nphase_edge)</code></pre><p>Type representing a discretized energy spectrum of Cherenkov photons, including detection efficiency and refractive indices derived from TORCH radiator materials.</p><p><strong>Fields</strong></p><ul><li><code>nbins::Int</code>: Number of energy bins in the spectrum.</li><li><code>emin::Float64</code>: Minimum energy value in the spectrum.</li><li><code>emax::Float64</code>: Maximum energy value in the spectrum.</li><li><code>dE::Float64</code>: Energy bin width.</li><li><code>energy::Vector{Float64}</code>: Array of energy values for each bin.</li><li><code>efficiency::Vector{Float64}</code>: Array of detection efficiency values corresponding to each energy bin.</li><li><code>nphase::Vector{Float64}</code>: Array of phase refractive index values for each energy bin.</li><li><code>ngroup::Vector{Float64}</code>: Array of group refractive index values for each energy bin.</li><li><code>vgroup::Vector{Float64}</code>: Array of group velocities for each energy bin.</li><li><code>nphase_edge::Vector{Float64}</code>: Array of phase refractive index values at the left edge of each energy bin.</li></ul><p><strong>Constructors</strong></p><pre><code class="nohighlight hljs">PhotonSpectrum(dht::DetectorHitTester; nbins::Int = 525, emin::Float64 = 1.75, emax::Float64 = 7.00)
PhotonSpectrum(; nbins::Int=525, emin::Float64=1.75, emax::Float64=7.00)</code></pre><p>Constructs a Cherenkov photon spectrum over a specified energy range, with properties computed for each energy bin. The refractive indices are derived from TORCH radiator materials, and detection efficiencies are determined using the provided <code>DetectorHitTester</code> object. A default <code>DetectorHitTester</code> is created if not provided.</p><p><strong>Arguments</strong></p><ul><li><code>dht::DetectorHitTester</code>: Detector hit tester object containing efficiency parameters.</li></ul><p><strong>Keywords</strong></p><ul><li><code>nbins::Int=525</code>: Number of energy bins in the spectrum (default: 525).</li><li><code>emin::Float64=1.75</code>: Minimum energy value in the spectrum (default: 1.75).</li><li><code>emax::Float64=7.00</code>: Maximum energy value in the spectrum (default: 7.00).</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Create a PhotonSpectrum with default parameters
spectrum = PhotonSpectrum()

# Using convenience method is to construct a PhotonSpectrum
# with a default DetectorHitTester and specified energy parameters.
spectrum = PhotonSpectrum(nbins=1000, emin=2.0, emax=6.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L1-L46">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TorchPID.PhotonSpectrumDistribution" href="#TorchPID.PhotonSpectrumDistribution"><code>TorchPID.PhotonSpectrumDistribution</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PhotonSpectrumDistribution(beta, yield_per_mm, distribution, cumulative)</code></pre><p>Type encapsulating the photon energy emission probability distribution for a charged particle traversing a TORCH radiator.</p><p><strong>Fields</strong></p><ul><li><code>beta::Float64</code>: Relativistic beta factor of the particle.</li><li><code>yield_per_mm::Float64</code>: Expected photon yield per millimeter of radiator.</li><li><code>distribution::Vector{Float64}</code>: Probability distribution of photon energies.</li><li><code>cumulative::Vector{Float64}</code>: Cumulative distribution function for sampling photon energies.</li></ul><p><strong>Constructors</strong></p><pre><code class="nohighlight hljs">PhotonSpectrumDistribution(s::PhotonSpectrum, beta::Float64)</code></pre><p>Constructs a distribution from a <code>PhotonSpectrum</code> and the particle&#39;s relativistic beta factor. The distribution is calculated using the Cherenkov emission formula, weighted by the detector efficiency. The photon yield is based on a factor of 37.0 photons per eV per mm as the base rate.</p><p><strong>Arguments</strong></p><ul><li><code>s::PhotonSpectrum</code>: The photon spectrum containing energy bin information.</li><li><code>beta::Float64</code>: Relativistic beta factor (v/c) of the particle.</li></ul><p><strong>Returns</strong></p><p>A new <code>PhotonSpectrumDistribution</code> object with photon energy emission probabilities calculated.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs"># Create a spectrum
spectrum = PhotonSpectrum()

# Create a photon energies probability distribution for a particle with beta = 0.99
distribution = PhotonSpectrumDistribution(spectrum, 0.99)

# Check if the distribution will produce photons
if spectrum_above_threshold(distribution)
    # Calculate expected yield over 10mm path
    yield = spectrum_yield(distribution, 10.0)
    println(&quot;Expected photon yield: $yield&quot;)
    
    # Sample a random energy from the distribution
    energy = spectrum_random_energy(spectrum, distribution)
end</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L96-L142">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TorchPID.spectrum_above_threshold-Tuple{PhotonSpectrumDistribution}" href="#TorchPID.spectrum_above_threshold-Tuple{PhotonSpectrumDistribution}"><code>TorchPID.spectrum_above_threshold</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spectrum_above_threshold(d::PhotonSpectrumDistribution)</code></pre><p><code>spectrum_above_threshold</code> determines whether the photon spectrum distribution has a non-zero yield per millimeter.      This indicates if the particle&#39;s velocity exceeds the Cherenkov threshold, allowing photon production.</p><p><strong>Arguments</strong></p><ul><li><code>d::PhotonSpectrumDistribution</code>: The photon spectrum distribution to check.</li></ul><p><strong>Returns</strong></p><ul><li><code>Bool</code>: <code>true</code> if the yield per millimeter is greater than zero, <code>false</code> otherwise.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L274-L285">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TorchPID.spectrum_ngroup-Tuple{PhotonSpectrum, Float64}" href="#TorchPID.spectrum_ngroup-Tuple{PhotonSpectrum, Float64}"><code>TorchPID.spectrum_ngroup</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spectrum_ngroup(s::PhotonSpectrum, energy::Float64)</code></pre><p><code>spectrum_ngroup</code> returns the group refractive index value corresponding to the given energy in the photon spectrum.</p><p><strong>Arguments</strong></p><ul><li><code>s::PhotonSpectrum</code>: The photon spectrum object.</li><li><code>energy::Float64</code>: The energy value for which to find the group refractive index.</li></ul><p><strong>Returns</strong></p><ul><li><code>Float64</code>: The group refractive index value for the given energy, or 0.0 if energy is outside the spectrum range.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L188-L200">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TorchPID.spectrum_nphase-Tuple{PhotonSpectrum, Float64}" href="#TorchPID.spectrum_nphase-Tuple{PhotonSpectrum, Float64}"><code>TorchPID.spectrum_nphase</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spectrum_nphase(s::PhotonSpectrum, energy::Float64)</code></pre><p><code>spectrum_nphase</code> returns the phase refractive index value corresponding to the given energy in the photon spectrum.</p><p><strong>Arguments</strong></p><ul><li><code>s::PhotonSpectrum</code>: The photon spectrum object.</li><li><code>energy::Float64</code>: The energy value for which to find the phase refractive index.</li></ul><p><strong>Returns</strong></p><ul><li><code>Float64</code>: The phase refractive index value for the given energy, or 0.0 if energy is outside the spectrum range.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L171-L183">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TorchPID.spectrum_probability-Tuple{PhotonSpectrum, PhotonSpectrumDistribution, Float64}" href="#TorchPID.spectrum_probability-Tuple{PhotonSpectrum, PhotonSpectrumDistribution, Float64}"><code>TorchPID.spectrum_probability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spectrum_probability(s::PhotonSpectrum, d::PhotonSpectrumDistribution, energy::Float64)</code></pre><p><code>spectrum_probability</code> computes the probability density for a given energy based on the photon spectrum distribution.     It identifies the energy bin corresponding to the input energy and retrieves the normalized probability density for that bin.      If the energy is outside the defined spectrum range, the function returns 0.0.</p><p><strong>Arguments</strong></p><ul><li><code>s::PhotonSpectrum</code>: The photon spectrum object containing energy bin information.</li><li><code>d::PhotonSpectrumDistribution</code>: The photon spectrum distribution with normalized probabilities.</li><li><code>energy::Float64</code>: The energy value for which to calculate the probability.</li></ul><p><strong>Returns</strong></p><ul><li><code>Float64</code>: The probability density at the given energy, normalized by the yield per millimeter, or 0.0 if energy is outside the spectrum range.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L249-L265">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TorchPID.spectrum_random_energy-Tuple{PhotonSpectrum, PhotonSpectrumDistribution}" href="#TorchPID.spectrum_random_energy-Tuple{PhotonSpectrum, PhotonSpectrumDistribution}"><code>TorchPID.spectrum_random_energy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spectrum_random_energy(s::PhotonSpectrum, d::PhotonSpectrumDistribution)</code></pre><p><code>spectrum_random_energy</code> samples a random energy value from the photon spectrum distribution using the cumulative distribution function.      It performs linear interpolation within energy bins to ensure accurate and weighted sampling based on the distribution.</p><p><strong>Arguments</strong></p><ul><li><code>s::PhotonSpectrum</code>: The photon spectrum object containing energy bin information.</li><li><code>d::PhotonSpectrumDistribution</code>: The photon spectrum distribution for sampling.</li></ul><p><strong>Returns</strong></p><ul><li><code>Float64</code>: A randomly sampled energy value from the distribution, or 0.0 if yield is below threshold.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L221-L234">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="TorchPID.spectrum_yield-Tuple{PhotonSpectrumDistribution, Float64}" href="#TorchPID.spectrum_yield-Tuple{PhotonSpectrumDistribution, Float64}"><code>TorchPID.spectrum_yield</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spectrum_yield(s::PhotonSpectrum, energy::Float64)</code></pre><p><code>spectrum_yield</code> calculates the total expected photon yield over the specified pathlength.</p><p><strong>Arguments</strong></p><ul><li><code>d::PhotonSpectrumDistribution</code>: The photon spectrum distribution.</li><li><code>pathlength::Float64</code>: Path length in millimeters traversed by the particle.</li></ul><p><strong>Returns</strong></p><ul><li><code>Float64</code>: Expected total number of photons produced over the pathlength.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/rrabadan/TorchPID.jl/blob/5f20ea0e22a6826c96b767257621959b44c97e4a/src/PhotonSpectrum.jl#L205-L217">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../photonmapper/">« Photon Mapper</a><a class="docs-footer-nextpage" href="../pattern_matcher/">Pattern Matcher »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Sunday 10 August 2025 18:02">Sunday 10 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
